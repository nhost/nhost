---
title: 'Hooks'
---

## Authentication Hooks

### Email + password registration

```js
const { signUp, loading, success, needsVerification, hasError, error } =
  useSignUpEmailPassword(email?: string, password?: string)
```

- `signUp: (email?: string, password?: string) => void` will request the email change. The email/password arguments will take precedence over the possible state values used when creating the hook.
- `loading: boolean` returns `true` when the action is executing, `false` when the action result is available.
- `needsVerification: boolean` returns `true` if the registration has been requested, but that a email has been sent to the user to verify the email.
- `success: boolean` returns `true` if user registration suceeded. Will return `false` if the new email needs to be verified first, or if an error occurred.
- `hasError: boolean` returns `true` if an error occurred.
- `error?: {status: number, error: string, message: string}` provides details about the error.

#### Usage

```jsx
import { useState } from 'react'
import { useSignUpEmailPassword } from '@nhost/react'

const Component = () => {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const { signUp, loading, success, needsVerification, hasError, error } = useSignUpEmailPassword(
    email,
    password
  )
  return (
    <div>
      <input value={email} onChange={(event) => setEmail(event.target.value)} placeholder="Email" />
      <input
        value={password}
        onChange={(event) => setPassword(event.target.value)}
        placeholder="Password"
      />
      <button onClick={signUp}>Register</button>
      {success && <div>Your account have beed created! You are now authenticated</div>}
      {needsVerification && (
        <div>
          Please check your mailbox and follow the verification link to confirm your registration
        </div>
      )}
    </div>
  )
}
```

### Email + password authentication

```js
const { signIn, loading, sent, hasError, error } =
  useEmailPasswordSignIn(email?: string, password?: string)
```

- `signIn: (email?: string, password?: string) => void` will try to authenticate. The email/password arguments will take precedence over the possible state values used when creating the hook.
- `loading: boolean` returns `true` when the action is executing, `false` when the action result is available.
- `needsVerification: boolean` returns `true` if the user email is still pending verification.
- `success: boolean` returns `true` if the user has successfully authenticated. Will return `false` in case or error or if the new email needs to be verified first.
- `hasError: boolean` returns `true` if an error occurred.
- `error?: {status: number, error: string, message: string}` provides details about the error.

#### Usage

```jsx
import { useState } from 'react'
import { useEmailPasswordSignIn } from '@nhost/react'

const Component = () => {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const { signIn, loading, success, needsVerification, hasError, error } = useEmailPasswordSignIn(
    email,
    password
  )
  return (
    <div>
      <input value={email} onChange={(event) => setEmail(event.target.value)} placeholder="Email" />
      <input
        value={password}
        onChange={(event) => setPassword(event.target.value)}
        placeholder="Password"
      />
      <button onClick={signUp}>Register</button>
      {success && <div>Authentication suceeded</div>}
      {needsVerification && (
        <div>
          Your email is still pending verification. Check your mailbox and follow the instructions
          to activate your account.
        </div>
      )}
    </div>
  )
}
```

### Passwordless email authentication

```js
const { signIn, loading, sent, hasError, error } =
  useEmailPasswordlessSignIn(email?: string)
```

- `signIn: (email?: string) => void` will send a magic link to the given email The email argument will take precedence over the the possible state value used when creating the hook.
- `loading: boolean` returns `true` when the action is executing, `false` when the action result is available.
- `success: boolean` returns `true` if the user has successfully authenticated. Will return `false` in case or error or if the new email needs to be verified first.
- `hasError: boolean` returns `true` if an error occurred.
- `error?: {status: number, error: string, message: string}` provides details about the error.

#### Usage

```jsx
import { useState } from 'react'
import { useEmailPasswordlessSignIn } from '@nhost/react'

const Component = () => {
  const [email, setEmail] = useState('')
  const { signIn, loading, success, hasError, error } = useEmailPasswordlessSignIn(email)
  return (
    <div>
      <input value={email} onChange={(event) => setEmail(event.target.value)} placeholder="Email" />
      <button onClick={signUp}>Register</button>
      {success && (
        <div>
          An email has been sent to {email}. Please check your mailbox and click on the
          authentication link.
        </div>
      )}
    </div>
  )
}
```

### Sign out

The `useSignOut` hook accepts an `all` argument that will be used when the `signOut` method will be called. This value can be overriden in calling `signOut(allValue)`.

```js
const { signOut, success } = useSignOut(all?: boolean)
```

- `signOut: (all?: boolean) => void` will log the current user out. If `all` is set to true, it will deactivate the active session from all other devices. The `all` argument will take precedence over the the possible state value used when creating the hook.
- `success: boolean` returns `true` when the user has successfully signed out.

#### Usage

```jsx
import { useState } from 'react'
import { useSignOut, useAuthenticated } from '@nhost/react'

const Component = () => {
  const { signOut, success } = useSignOut()
  const authenticated = useAuthenticated()
  if (authenticated)
    return (
      <div>
        <button onClick={signUp}>Sign out</button>
        {success && <div>You have successfully signed out!</div>}
      </div>
    )
  else return <div>Not authenticated</div>
}
```

## Authentication status

### `useReady` and `useLoading`

<!-- TODO better documentation -->

During startup, the client may need some initial steps to determine the authentication status, like fetching a new JWT from an existing refresh token.

When the authentication status is known, this `useReady` will return `true`. `useLoading` does the exact opposite things: it returns `true` when the authentication status is not known yet.

You can use the `isLoading` and `isAuthenticated` together with the `useNhostAuth` hook:

```js
const { isLoading, isAuthenticated } = useNhostAuth()
```

#### Usage

```jsx
import { useLoading } from '@nhost/react'

const Component = () => {
  const { isLoading, isAuthenticated } = useNhostAuth()
  if (isLoading) return <div>Loading Nhost authentication status...</div>
  else if (isAuthenticated) return <div>User is authenticated</div>
  else return <div>Public section</div>
}
```

### Get the JWT access token

<!-- TODO better documentation -->

```js
const jwt = useAccessToken()
```

## User management

### Change email

```js
const { change, loading, success, needsVerification, hasError, error } =
  useChangeEmail(email?: string)
```

- `change: (email?: string) => void` will request the email change. The arguement password will take precedence over the the possible state value used when creating the hook.
- `loading: boolean` returns `true` when the action is executing, `false` when the action result is available.
- `needsVerification: boolean` returns `true` if the email change has been requested, but that a email has been sent to the user to verify the new email.
- `success: boolean` returns `true` if the email has beed successfully changed. Will return `false` if the new email needs to be verified first.
- `hasError: boolean` returns `true` if an error occurred.
- `error?: {status: number, error: string, message: string}` provides details about the error.

#### Usage

```jsx
import { useState } from 'react'
import { useChangeEmail } from '@nhost/react'

const Component = () => {
  const [email, setEmail] = useState('')
  const { change, loading, success, hasError, error } = useChangeEmail(password)
  return (
    <div>
      <input value={email} onChange={(event) => setEmail(event.target.value)} />
      <button onClick={change}>Change password</button>
      {success && <div>Your email has been changed!</div>}
      {needsVerification && (
        <div>
          Please check your mailbox and follow the verification link to confirm your new email
        </div>
      )}
    </div>
  )
}
```

### Change password

```js
const { change, loading, success, hasError, error } = useChangePassword(password?: string)
```

- `change: (password?: string) => void` will request the pasword change. The arguement password will take precedence over the the possible state value used when creating the hook.
- `loading: boolean` returns `true` when the action is executing, `false` when the action result is available.
- `success: boolean` returns `true` if the password has beed successfully changed.
- `hasError: boolean` returns `true` if an error occurred.
- `error?: {status: number, error: string, message: string}` provides details about the error.

#### Usage

```jsx
import { useState } from 'react'
import { useChangePassword } from '@nhost/react'

const Component = () => {
  const [password, setPassword] = useState('')
  const { change, loading, success, hasError, error } = useChangePassword(password)
  return (
    <div>
      <input value={password} onChange={(event) => setPassword(event.target.value)} />
      <button onClick={change}>Change password</button>
    </div>
  )
}
```

## User data

<!-- TODO document -->

```js
const userData = useUserData()
```

### Avatar

```js
const avatar = useAvatarUrl()
```

### User roles

```js
const roles = useUserRoles()
const defaultRole = useDefaultRole()
```

### Display name

```js
const displayName = useDisplayName()
```

### Email

```js
const email = useEmail()
```

### User Id

```js
const userId = useUserId()
```

### Anonymous user

```js
const isAnonymous = useIsAnonymous()
```

### Locale

```js
const locale = useUserLocale()
```
