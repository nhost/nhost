---
title: "Assistants"
description: "Deploy your customized AI assistants"
icon: wand-magic-sparkles
---

## Overview

AI Assistants leverages ChatGPT to power customized AI experiences for your users. Each assistant can be configured with specific tools and data access permissions, allowing you to create tailored AI interactions.

These assistants integrate directly with your application's data through pre-defined GraphQL queries, mutations, and webhooks. Each assistant can have its own unique set of data access permissions.

<Note>
AI assistants are fully integrated with Nhost permissions system. This means users will only have access to data they're authorized to see during AI interactions.
</Note>

## Demo Project Setup

To demonstrate how to configure and use AI Assistants, we'll work with a sample project containing a movie database. This example will show you how to create, configure, and interact with AI assistants in a real-world context.

## Creating AI Assistants

### Configuration Options

You can create an AI assistant in two ways:
- Using the dashboard interface
- Using the `insertAssistant` GraphQL mutation

Here's how to set up an assistant using either method:

<Tabs>
  <Tab title="dashboard">
![dashboard](/images/guides/ai/assistants/dashboard.png)
  </Tab>
  <Tab title="graphql">

```graphql
mutation {
  graphite {
    insertAssistant(object: {
      name: "awesome-assistant-for-my-users",
      description: "My Awesome assistant for my users",
      instructions: "You are a useful assistant for this demo application. You are an expert on movies. You also know a bit about deep questions.",
      model: "gpt-3.5-turbo-1106",
      graphql: [
        {
          description: "get movies with higher score than the input"
          name: "GetMoviesWithScoreHigherThan",
        	query: "query ($score: numeric!) {  movies(where: {score: {_gt: $score}}) {    name    overview    score }}",
          arguments: [
            {
              name: "score",
              description: "score to compare against",
              type: "number",
              required: true,
            }
          ]
        },
        {
          description: "search movies using natural language",
          name: "SearchMovies",
          query: "query GraphiteSearchMovies($query: String!) { graphiteSearchMovies(args: {query: $query, amount: 5}) { id name overview genre } }",
          arguments: [
            {
              name: "query",
              description: "Text to search",
              type: "string",
              required: true,
            }
          ]
        }
        {
          description: "insert a movie into the database",
          name: "InsertMovie",
          query: "mutation InsertMovie($name: String, $overview: String, $genre: String, $crew: String, $budget: bigint, $revenue: bigint, $country: String, $score: numeric) { insertMovie(object: {name: $name, overview: $overview, score: $score, genre: $genre, crew: $crew, budget: $budget, revenue: $revenue, country: $country}) {id}}",
          arguments: [
            {
              name: "name",
              description: "Name of the movie",
              type: "string",
              required: true,
            },
            {
              name: "overview",
              description: "Overview of the movie",
              type: "string",
              required: true,
            },
           {
              name: "genre",
              description: "Genre of the movie",
              type: "string",
              required: true,
            },
           {
              name: "crew",
              description: "Crew of the movie",
              type: "string",
              required: true,
            },
           {
              name: "budget",
              description: "Budget of the movie",
              type: "number",
              required: true,
            },
           {
              name: "revenue",
              description: "Revenue generated by the movie",
              type: "number",
              required: true,
            },
           {
              name: "country",
              description: "Country of origin for the movie",
              type: "string",
              required: true,
            },
           {
              name: "score",
              description: "Score of the movie",
              type: "number",
              required: true,
            },
          ]
        }
      ],
      webhooks: [
        {
          name: "answer_deep_questions",
          description: "Answers deep questions about life, the universe and everything",
          URL: "https://local.functions.nhost.run/v1/meaning",
          arguments: [
            {
              name: "question",
              description: "question that needs answer",
              type: "string",
              required: true,
            }
          ],
        }
      ]
    }) {
      assistantID
    }
  }
}
```

  </Tab>
</Tabs>

## Understanding Assistant Tools

Tools enhance your AI assistants' capabilities by providing access to data and functionality. Our example assistant includes four different tools:

### GraphQL Queries and Mutations
1. `GetMoviesWithScoreHigherThan`: Queries movies based on their score
2. `SearchMovies`: Uses [auto-embeddings](auto-embeddings) for natural language movie searches
3. `InsertMovie`: Allows the assistant to add new movies to the database

### Webhooks
4. `answer_deep_questions`: A serverless function that handles philosophical questions

<Info>
ChatGPT doesn't directly query your data - instead, it instructs graphite to execute these tools and process the results. All tool executions respect user permissions and session context.
</Info>

## Working with Assistant Sessions

### Starting a New Session

To begin interacting with an assistant, first create a session using the `startSession` mutation:

```graphql
mutation {
  graphite {
	startSession(assistantID:"asst_xolmq2yeBBRi8CKGc5YWXGaA") {
      sessionID
    }
  }
}
```

You'll receive a response with a session ID:

```json
{
  "data": {
    "graphite": {
      "startSession": {
        "sessionID": "thread_dxHHNpQryFpJ8wXXD9Q2fQJg"
      }
    }
  }
}
```

### Sending Messages

Once you have a session, you can start sending messages to the assistant:

```graphql
mutation {
  graphite {
	sendMessage(
      sessionID:"thread_dxHHNpQryFpJ8wXXD9Q2fQJg",
      message: "what is the meaning of life?"
      prevMessageID: "",
    ) {
      sessionID
      messages {
        id
        createdAt
        role
        message
      }
    }
  }
}
```

<Note>
The `prevMessageID` field lets you retrieve only new messages after a specific message. Use an empty string to get all messages in the conversation.
</Note>

### Understanding Message Flow

When you send a message, here's what happens behind the scenes:

![answer deep questions sequence of events](/images/guides/ai/assistants/answer_deep_questions.png)

## Implementing Complex Workflows

Assistants can combine multiple tools to create sophisticated interactions. For example, they can:
- Search for existing data using `SearchMovies`
- Create new entries with `InsertMovie`
- Process user questions with webhooks
- Chain multiple operations together

### Example Workflow

Here's a sample conversation showing tool combinations:

```json
{
  "data": {
    "graphite": {
      "sendDevMessage": {
        "sessionID": "thread_kxgdq2wPDwdWETwGsC68psGw",
        "messages": [
          {
            "id": "msg_orBzaQTulaWtFLe2VhgjX0op",
            "role": "user",
            "createdAt": "2023-12-21T08:16:18Z",
            "message": "Are there any good comedies in space?"
          },
          {
            "id": "msg_WatLEqiP8IyZYkImBsgJPtm0",
            "role": "assistant",
            "createdAt": "2023-12-21T08:16:29Z",
            "message": "Here are some good comedies set in space..."
          }
        ]
      }
    }
  }
}
```

## Security and Permissions

### User Sessions

<Warning>
All interactions with graphite require proper authentication through either:
- An Authorization header
- The admin secret
</Warning>

The authentication context is preserved when:
- Making GraphQL queries
- Calling webhooks
- Accessing protected data

### Metadata and Access Control

Graphite maintains metadata tables for assistants and sessions:
- `graphite.assistants`
- `graphite.sessions`

These tables allow you to set granular permissions just like any other object in your project. For detailed permission requirements, see the [reference](/reference/graphql/ai/overview) section.

<Tip>
Review the GraphQL schema documentation for additional queries and mutations available for managing assistants and sessions.
</Tip>